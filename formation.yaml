schema: "1.0.0"

id: "some-forma"
name: "test formation"
description: "A new MUXI formation"
version: "1.0.0"

server:
  host: "0.0.0.0"
  port: 8271

  api_keys:
    admin_key: "${{ secrets.FORMATION_ADMIN_API_KEY }}"
    client_key: "${{ secrets.FORMATION_CLIENT_API_KEY }}"

overlord:

  clarification:
    style: "conversational"
    persist_learned_info: true
    max_rounds:
      direct: 3
      brainstorm: 10
      planning: 7
      execution: 3

  workflow:
    routing_strategy: "capability"
    auto_decomposition: true
    plan_approval_threshold: 7
    complexity_method: "hybrid"
    parallel_execution: true
    max_parallel_tasks: 5
    enable_agent_affinity: true
    error_recovery: "retry_with_backoff"
    timeouts:
      task: 300
      workflow: 3600

  response:
    format: "markdown"
    streaming: true
    progress: true

  persona: |
    You are a cool dude that writes stuff
    on a new line

llm:

  settings:
    temperature: 0.7
    max_tokens: 4096
    timeout_seconds: 30
    max_retries: 3
    fallback_model: "openai/gpt-5-mini"
    caching:
      enabled: true
      max_entries: 10000
      similarity: 0.95
      ttl: 86400

  api_keys:
    anthropic: "${{ secrets.ANTHROPIC_API_KEY }}"
    openai: "${{ secrets.OPENAI_API_KEY }}"
    google: "${{ secrets.GOOGLE_API_KEY }}"

  models:
    - streaming: "openai/gpt-5-mini"
      settings:
      temperature: 0.7
      max_tokens: 4096
      timeout_seconds: 30
      max_retries: 3
    - embedding: "openai/text-embedding-3-large"
      settings:
      temperature: 0.7
      max_tokens: 4096
      timeout_seconds: 30
      max_retries: 3
    - documents: "openai/gpt-5"
      settings:
      temperature: 0.7
      max_tokens: 4096
      timeout_seconds: 30
      max_retries: 3
      max_size_mb: 20
      extraction:
        chunk_size: 1000
        overlap: 100
        strategy: "adaptive"
      cache_ttl_seconds: 3600
    - audio: "openai/whisper-1"
      settings:
      temperature: 0.7
      max_tokens: 4096
      timeout_seconds: 30
      max_retries: 3
      fallback_model: "openai/gpt-4o-mini"
      max_size_mb: 10
      language: "auto"
    - vision: "google/gemini-2.5-flash"
      settings:
      temperature: 0.7
      max_tokens: 4096
      timeout_seconds: 30
      max_retries: 3
      fallback_model: "anthropic/claude-sonnet-4-5"
      image:
        max_size_mb: 5
        preprocessing:
          resize: true
          max_width: 1024
          max_height: 1024
    - text: "openai/gpt-5"
      settings:
      temperature: 0.7
      max_tokens: 4096
      timeout_seconds: 30
      max_retries: 3
      fallback_model: "anthropic/claude-sonnet-4-5"

scheduler:
  timezone: "UTC"

memory:

  persistent:
    connection_string: "${{ secrets.PERSISTENT_DB_CONNECTION_STRING }}"
    query_timeout_seconds: 30
    user_synopsis:
      enabled: true
      cache_ttl: 3600

  buffer:
    size: 10
    multiplier: 10
    vector_search: true

  working:
    mode: "remote"
    max_memory_mb: "256"
    vector_dimension: 3072
    fifo_interval_min: 5
    remote:
      url: "tcp://localhost:8000"
      api_key: "${{ secrets.FAISSX_API_KEY }}"
      tenant: "${{ secrets.FAISSX_TENANT_ID }}"

user_credentials:
  mode: dynamic
  redirect_url: https://example.com/credentials

  encryption:
    key: ${{ secrets.USER_CREDENTIALS_ENCRYPTION_KEY }}

logging:

  streams:
    - transport: stdout
      level: info
      format: jsonl
    - transport: file
      destination: /var/log/formation.log
      level: debug
      format: jsonl
    - transport: http
      destination: https://asjdkhaskdhj.com
      format: datadog
      auth:
      token: ${{ secrets.LOGGING_BEARER_TOKEN }}
      type: bearer

async:
  threshold_seconds: 30
  webhook_url: "https://ewr.com"

  retry:
    count: 3
    delay_seconds: 5
